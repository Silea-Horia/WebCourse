<!DOCTYPE html>
<html>
    <head>
        <title>ecommerce</title>
        <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
        <link href="styles.css" rel="stylesheet" >
    </head>
    <body>
        <div class="category-buttons"></div>
        <ul class="product-list"></ul>
        <div class="page-buttons">
            <ul>
                <button id="prev-button" onclick="previousPage()">Previous</button>
                <button id="next-button" onclick="nextPage()">Next</button>
            </ul>
        </div>
    </body>
    <script>
        let page = 1;
        let currentCategory = "";

        $(document).ready(function() {
            setCategoriesButtons();
            
        });

        function setCategoriesButtons() {
            $.ajax({
                type: "GET",
                url: "getCategories.php",
                success: function(data, status) {
                    $(".category-buttons").html(data);
                }
            });
        }

        function setCategory(category) {
            console.log(category);
            
            currentCategory = category;
            page = 1;
            
            populateCategory();
        }

        function populateCategory() {
            if (page == 1) {
                document.getElementById("prev-button").disabled = true;
            } else {
                document.getElementById("prev-button").disabled = false;
            }

            $.ajax({
                type: "GET",
                url: "getProducts.php",
                data: {"Category" : currentCategory, "Page" : page},
                success: function(data, status) {
                    $(".product-list").html(data);
                }
            });
        }

        function previousPage() {
            page = page - 1;

            populateCategory();
        }

        function nextPage() {
            page = page + 1;

            populateCategory();
        }
    </script>
</html>